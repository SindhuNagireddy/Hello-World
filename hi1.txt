pipeline {
    agent any
    tools{
        maven 'MAVEN_HOME'
    }
    stages {
        stage('Clean Workspace') {
            steps {
                cleanWs()
            }
        }
        stage('git repo & clean') {
            steps {
                //bat "rmdir  /s /q sah"
                bat "git clone https://github.com/SindhuNagireddy/sah.git"
                bat "mvn clean -f sah"
            }
        }
        stage('install') {
            steps {
                bat "mvn install -f sah" 
            }
        }
        stage('test') {
            steps {
                bat "mvn test -f sah"
            }
        }
        stage('package') {
            steps {
                bat "mvn package -f sah"
            }
        }
    }
}


Dockerfile(AWS)


FROM nginx:alpine
COPY . /usr/share/nginx/html



dockerfile(jar/war)



FROM openjdk:17-jdk-alpine

WORKDIR /app

COPY target/*.jar app.jar

EXPOSE 8080

ENTRYPOINT ["java", "-jar", "app.jar"]



FROM tomcat:9.0

# (Optional but recommended)
# (not required I think) RUN rm -rf /usr/local/tomcat/webapps/*

COPY target/*.war /usr/local/tomcat/webapps/ROOT.war

EXPOSE 8080

CMD ["catalina.sh", "run"]


docker-compose.yml

#1.
version: "3.9"

services:
  tomcat-server:
    image: tomcat:9.0
    container_name: tomcat-server
    ports:
      - "8086:8080"
    restart: always

  campus-mgmt-app:
    image: yourdockerhubusername/campusmgmtsystem:latest
    container_name: campus-mgmt-app
    depends_on:
      - tomcat-server
    ports:
      - "7007:8080"
    restart: always


#2.
version: "3.9"

services:
  food-app:
    image: yourdockerhubusername/food-ordering-system:latest
    container_name: food-ordering-app
    ports:
      - "7075:8080"
    depends_on:
      - postgres-db
    restart: always

  postgres-db:
    image: postgres:15
    container_name: postgres-db
    environment:
      POSTGRES_USER: food_user
      POSTGRES_PASSWORD: food_pass
      POSTGRES_DB: food_db
    ports:
      - "5432:5432"
    volumes:
      - pgdata:/var/lib/postgresql/data

volumes:
  pgdata:



#3.

version: "3.9"

services:
  campus-app:
    image: yourdockerhubusername/campusmgmtsystem:latest
    container_name: campus-app
    ports:
      - "7079:8080"
    depends_on:
      - mongo-db
    restart: always

  mongo-db:
    image: mongo:6
    container_name: mongo-db
    ports:
      - "27017:27017"
    volumes:
      - mongodata:/data/db
    restart: always

volumes:
  mongodata:


#4.

version: "3.9"

services:
  tomcat-server:
    image: tomcat:9.0
    container_name: smart-tomcat
    ports:
      - "8080:8080"
    restart: always
    depends_on:
      - mysql-db

  mysql-db:
    image: mysql:8
    container_name: mysql-db
    environment:
      MYSQL_ROOT_PASSWORD: root123
      MYSQL_DATABASE: assessmenthub
      MYSQL_USER: hub_user
      MYSQL_PASSWORD: hub_pass
    ports:
      - "3306:3306"
    volumes:
      - mysqldata:/var/lib/mysql
    restart: always

volumes:
  mysqldata:





curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-installer.exe

minikube start --driver=docker

minikube status
 
minikube kubectl -- get pods -A

Check the Minikube logs: 
minikube logs

minikube start

Command:
kubectl create deployment mynginx --image=nginx

if already created then 

kubectl set image deployment/myngnix nginx=nginx:latest

kubectl get deployments
kubectl get pods

Command:
kubectl expose deployment mynginx --type=NodePort --port=80 --target-port=80
Command:
kubectl port-forward svc/mynginx 8081:80

Commands:
kubectl delete deployment mynginx
Command:
minikube stop


Nagios Automation Steps

docker pull jasonrivers/nagios:latest

docker run --name nagiosdemo -p 8888:80 jasonrivers/nagios:latest
http://localhost:8888
Login Credentials:
Username: nagiosadmin
Password: nagios

docker stop nagiosdemo
docker rm nagiosdemo
docker images
docker rmijasonrivers/nagios:latest


sudo apt update
sudo apt-get install docker.io 
sudo apt install git
sudo apt install nano

git clone <copied http url>
cd AWS 
ls
nano dockerfile
sudo docker build –t mywebapp .
sudo docker run –d –p 80:80 mywebapp


-----------------------------------------------------
docker build -t hospital-mgmt .
docker run -d --name hospital-container -p 9090:8080 hospital-mgmt
docker run -d --name myredis -p 8080:6379 redis
docker login
docker tag hospital-mgmt yourusername/hospital-mgmt:latest
docker push yourusername/hospital-mgmt:latest
docker logs hospital-container





